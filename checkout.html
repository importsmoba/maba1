<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Moba Imports</title>
    <meta name="description" content="Finalize sua compra de câmeras e drones na Moba Imports. Processo de checkout seguro e rápido.">
    <meta name="robots" content="noindex, nofollow">

    <style>
        :root {
            --bg-main: #121212;
            --bg-secondary: #1a1a1a;
            --text-main: #e0e0e0;
            --text-secondary: #a0a0a0;
            --accent: #ff6600;
            --accent-hover: #ff8533;
            --border-color: #333;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .container {
            width: 90%;
            max-width: 800px;
            margin: 0 auto;
        }
        h1, h2 {
            color: #ffffff;
            margin-bottom: 1rem;
            text-align: center;
        }
        h1 {
            font-size: 2.5rem;
            margin-top: 2rem;
        }
        h2 {
            font-size: 1.8rem;
            color: var(--accent);
        }
        p {
            color: var(--text-secondary);
        }
        .header, .footer {
            background-color: var(--bg-secondary);
            padding: 1rem 0;
            text-align: center;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
            text-decoration: none;
        }
        .footer {
            margin-top: auto;
            padding: 2rem 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        main {
            padding: 40px 0;
            flex-grow: 1;
        }
        .checkout-layout {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        .resumo-pedido {
            background-color: var(--bg-secondary);
            padding: 2rem;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }
        .resumo-pedido ul {
            list-style: none;
        }
        .resumo-pedido li {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem 0;
            font-size: 1.1rem;
            border-bottom: 1px solid var(--border-color);
        }
        .resumo-pedido li:last-child {
            border-bottom: none;
        }
        .resumo-pedido .total {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
            margin-top: 1rem;
        }
        .resumo-pedido .total .valor-total {
            color: var(--accent);
        }
        .form-checkout {
            background-color: var(--bg-secondary);
            padding: 2rem;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-main);
        }
        .form-group input {
            width: 100%;
            padding: 12px;
            background-color: var(--bg-main);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            color: var(--text-main);
            font-size: 1rem;
        }
        .form-group input:focus {
            outline: none;
            border-color: var(--accent);
        }
        .submit-btn {
            width: 100%;
            padding: 15px;
            background-color: var(--accent);
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            text-transform: uppercase;
            transition: background-color 0.3s ease;
        }
        .submit-btn:hover {
            background-color: var(--accent-hover);
        }
        
        /* Seção de Seleção de Pagamento */
        .payment-selection {
            background-color: var(--bg-secondary);
            padding: 2rem;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            margin-top: 2rem;
        }
        .payment-options {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .payment-option {
            flex: 1;
            padding: 1.5rem;
            background-color: var(--bg-main);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }
        .payment-option:hover {
            border-color: var(--accent);
        }
        .payment-option.selected {
            border-color: var(--accent);
            background-color: rgba(255, 102, 0, 0.1);
        }
        .payment-option h3 {
            margin-bottom: 0.5rem;
            color: var(--text-main);
        }
        .payment-option p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        .payment-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        /* Seção de Pagamento PIX */
        #secao-pagamento-pix {
            display: none;
            background-color: var(--bg-secondary);
            padding: 2rem;
            border-radius: 10px;
            margin-top: 2rem;
        }
        #secao-pagamento-pix h2 {
            text-align: center;
            margin-bottom: 2rem;
        }
        #secao-pagamento-pix h3 {
            color: var(--accent);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        #secao-pagamento-pix h4 {
            color: var(--text-main);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        .pagamento-opcao {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: var(--bg-main);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .pagamento-opcao:last-of-type {
            margin-bottom: 1rem;
        }
        #qr-code-container {
            text-align: center;
            margin: 1rem 0;
        }
        #qr-code-container img {
            max-width: 250px;
            width: 100%;
            height: auto;
            border: 3px solid #fff;
            border-radius: 8px;
        }
        .chave-pix-container {
            display: flex;
            gap: 2rem;
            align-items: flex-start;
        }
        .chave-pix-info {
            flex: 1;
        }
        .chave-pix-valor {
            background-color: var(--bg-secondary);
            padding: 12px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 1rem;
            color: var(--text-main);
            border: 1px solid var(--border-color);
            margin-bottom: 1rem;
            word-break: break-all;
        }
        .copiar-btn {
            background-color: #25D366;
            color: #fff;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .copiar-btn:hover {
            background-color: #1da851;
            transform: translateY(-2px);
        }
        .copiar-btn:active {
            transform: translateY(0);
        }
        .copiar-btn.copiado {
            background-color: #28a745;
        }
        .instrucoes-pix {
            flex: 1.5;
        }
        .instrucoes-pix ol {
            padding-left: 1.2rem;
        }
        .instrucoes-pix li {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        .instrucoes-pix li strong,
        .instrucoes-pix li span {
            color: var(--text-main);
        }
        .valor-total-pagamento {
            text-align: center;
            margin: 2rem 0;
            padding: 1.5rem;
            background-color: var(--bg-main);
            border-radius: 8px;
            border: 2px solid var(--accent);
        }
        #valor-pagamento {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
            margin-top: 0.5rem;
        }
        .confirmacao-info {
            text-align: center;
            margin-top: 2rem;
            padding: 1rem;
            background-color: rgba(255, 102, 0, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--accent);
        }
        .confirmacao-info p {
            margin-bottom: 0.5rem;
            color: var(--text-main);
        }
        .error-message {
            color: #ff4d4d;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        input.invalid {
            border-color: #ff4d4d;
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            .container {
                width: 95%;
            }
            .form-checkout, .resumo-pedido, .payment-selection {
                padding: 1.5rem;
            }
            .payment-options {
                flex-direction: column;
            }
            .chave-pix-container {
                flex-direction: column;
                gap: 1rem;
            }
            .instrucoes-pix {
                flex: 1;
            }
            #qr-code-container img {
                max-width: 200px;
            }
            .valor-total-pagamento {
                padding: 1rem;
            }
            #valor-pagamento {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">Moba Imports</a>
        </div>
    </header>

    <main>
        <div class="container">
            <h1>Finalizar Compra</h1>
            <div class="checkout-layout">
                
                <section class="resumo-pedido">
                    <h2>Resumo do Pedido</h2>
                    <ul>
                        <li>
                            <span>Produto:</span>
                            <span id="produto-nome">Carregando...</span>
                        </li>
                        <li>
                            <span>Valor do Produto:</span>
                            <span id="produto-preco">R$ 0,00</span>
                        </li>
                        <li>
                            <span>Frete:</span>
                            <span id="frete-valor">R$ 0,00</span>
                        </li>
                        <li class="total">
                            <span>Total a Pagar:</span>
                            <span id="total-valor" class="valor-total">R$ 0,00</span>
                        </li>
                    </ul>
                </section>

                <section id="secao-formulario">
                    <form id="checkout-form" class="form-checkout" novalidate>
                        <h2>Seus Dados</h2>
                        <div class="form-group">
                            <label for="nome">Nome Completo</label>
                            <input type="text" id="nome" name="nome" required>
                            <p class="error-message">Campo obrigatório.</p>
                        </div>
                        <div class="form-group">
                            <label for="email">E-mail</label>
                            <input type="email" id="email" name="email" required>
                            <p class="error-message">Por favor, insira um e-mail válido.</p>
                        </div>
                        <div class="form-group">
                            <label for="telefone">Telefone (com DDD)</label>
                            <input type="tel" id="telefone" name="telefone" required>
                            <p class="error-message">Campo obrigatório.</p>
                        </div>
                        <div class="form-group">
                            <label for="endereco">Endereço (Rua, Nº, Bairro)</label>
                            <input type="text" id="endereco" name="endereco" required>
                            <p class="error-message">Campo obrigatório.</p>
                        </div>
                        <div class="form-group">
                            <label for="cidade">Cidade</label>
                            <input type="text" id="cidade" name="cidade" required>
                            <p class="error-message">Campo obrigatório.</p>
                        </div>
                        <div class="form-group">
                            <label for="estado">Estado</label>
                            <input type="text" id="estado" name="estado" required>
                            <p class="error-message">Campo obrigatório.</p>
                        </div>
                        <div class="form-group">
                            <label for="cep">CEP</label>
                            <input type="text" id="cep" name="cep" readonly>
                        </div>
                        <button type="submit" class="submit-btn">Continuar para Pagamento</button>
                    </form>
                </section>

                <!-- Seção de Seleção de Pagamento -->
                <section id="payment-selection" class="payment-selection" style="display: none;">
                    <h2>Escolha a Forma de Pagamento</h2>
                    <div class="payment-options">
                        <div class="payment-option" data-payment="pix">
                            <div class="payment-icon">📱</div>
                            <h3>PIX</h3>
                            <p>Pagamento instantâneo via PIX</p>
                        </div>
                        <div class="payment-option" data-payment="cartao">
                            <div class="payment-icon">💳</div>
                            <h3>Cartão de Crédito</h3>
                            <p>Pague com seu cartão de crédito</p>
                        </div>
                    </div>
                    <button id="confirm-payment-btn" class="submit-btn" style="display: none;">Confirmar Forma de Pagamento</button>
                </section>

                <!-- Seção de Pagamento PIX -->
                <section id="secao-pagamento-pix">
                    <h2>Pagamento via Pix</h2>
                    
                    <div class="pagamento-opcao">
                        <h3>Opção 1: Escaneie o QR Code</h3>
                        <p>Abra o aplicativo do seu banco e escaneie o código abaixo:</p>
                        <div id="qr-code-container">
                            <img src="qrcode1.svg" alt="QR Code para pagamento PIX" style="max-width: 250px;">
                        </div>
                    </div>

                    <div class="pagamento-opcao">
                        <h3>Opção 2: Copie a Chave Pix</h3>
                        <div class="chave-pix-container">
                            <div class="chave-pix-info">
                                <p><strong>Chave Pix:</strong></p>
                                <div class="chave-pix-valor" id="chave-pix-valor">00020126580014BR.GOV.BCB.PIX013636c4b4c4-4c4c-4c4c-4c4c-4c4c4c4c4c4c5204000053039865802BR5925MOBA IMPORTS LTDA6009SAO PAULO62070503***6304ABCD</div>
                                <button id="copiar-chave-btn" class="copiar-btn">Copia e cola</button>
                            </div>
                            <div class="instrucoes-pix">
                                <h4>Como pagar:</h4>
                                <ol>
                                    <li>Clique no botão "Copia e cola" ao lado</li>
                                    <li>Abra o aplicativo do seu banco</li>
                                    <li>Vá em "Pix" → "Pagar" → "Colar código"</li>
                                    <li>Cole a chave copiada</li>
                                    <li>Confirme o valor: <span id="valor-instrucoes">R$ 0,00</span></li>
                                    <li>Finalize o pagamento</li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <div class="valor-total-pagamento">
                        <p><strong>Valor Total a Pagar:</strong></p>
                        <div id="valor-pagamento">R$ 0,00</div>
                    </div>

                    <div class="confirmacao-info">
                        <p><strong>📞 Confirmação Automática</strong></p>
                        <p>Após o pagamento, você receberá a confirmação por WhatsApp em até 5 minutos.</p>
                        <p>Dúvidas? Entre em contato: <strong>(11) 94452-6939</strong></p>
                    </div>
                </section>

            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>Moba Imports - Câmeras Profissionais e Drones &copy; 2025</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Produtos disponíveis
        const produtos = {
            '1': { nome: 'Canon EOS Rebel T7+ 18-55mm', preco: 3099.00 },
            '2': { nome: 'Sony A6700 18-135mm', preco: 12099.00 },
            '3': { nome: 'Sony FX30 Corpo', preco: 11200.00 },
            '4': { nome: 'Canon EOS R8', preco: 8300.00 },
            '5': { nome: 'Canon G7 X Mark III', preco: 7350.00 },
            '6': { nome: 'Nikon P1000 Super Zoom 125x', preco: 9700.00 },
            '7': { nome: 'Canon EOS Rebel SL3 18-55mm', preco: 3999.00 },
            '8': { nome: 'Sony ZV-E10 com Lente 16-50mm', preco: 4100.00 },
            '9': { nome: 'Sony A6700 Mirrorless (Corpo)', preco: 9200.00 }
        };

        // Obter parâmetros da URL
        const urlParams = new URLSearchParams(window.location.search);
        const produtoId = urlParams.get('produto');
        const precoParam = parseFloat(urlParams.get('preco'));
        const freteParam = parseFloat(urlParams.get('frete'));
        const cepParam = urlParams.get('cep');

        let produtoNome = 'Produto não encontrado';
        let produtoPreco = 0;
        let frete = freteParam || 49.90;
        let total = 0;

        if (produtoId && produtos[produtoId]) {
            produtoNome = produtos[produtoId].nome;
            produtoPreco = precoParam || produtos[produtoId].preco;
        }

        total = produtoPreco + frete;

        // Preencher resumo do pedido
        document.getElementById('produto-nome').textContent = produtoNome;
        document.getElementById('produto-preco').textContent = `R$ ${produtoPreco.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
        document.getElementById('frete-valor').textContent = `R$ ${frete.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
        document.getElementById('total-valor').textContent = `R$ ${total.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;

        // Preencher CEP se disponível
        if (cepParam) {
            document.getElementById('cep').value = cepParam;
        }

        // Validação do formulário
        const form = document.getElementById('checkout-form');
        const paymentSelection = document.getElementById('payment-selection');
        
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            let isValid = true;
            const requiredFields = ['nome', 'email', 'telefone', 'endereco', 'cidade', 'estado'];
            
            requiredFields.forEach(fieldName => {
                const field = document.getElementById(fieldName);
                const errorMsg = field.parentNode.querySelector('.error-message');
                
                if (!field.value.trim()) {
                    field.classList.add('invalid');
                    errorMsg.style.display = 'block';
                    isValid = false;
                } else {
                    field.classList.remove('invalid');
                    errorMsg.style.display = 'none';
                }
            });

            // Validação específica do email
            const emailField = document.getElementById('email');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailField.value.trim() && !emailRegex.test(emailField.value)) {
                emailField.classList.add('invalid');
                emailField.parentNode.querySelector('.error-message').style.display = 'block';
                isValid = false;
            }

            if (isValid) {
                // Mostrar seleção de pagamento
                paymentSelection.style.display = 'block';
                paymentSelection.scrollIntoView({ behavior: 'smooth' });
            }
        });

        // Seleção de forma de pagamento
        const paymentOptions = document.querySelectorAll('.payment-option');
        const confirmPaymentBtn = document.getElementById('confirm-payment-btn');
        let selectedPayment = null;

        paymentOptions.forEach(option => {
            option.addEventListener('click', function() {
                paymentOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedPayment = this.getAttribute('data-payment');
                confirmPaymentBtn.style.display = 'block';
            });
        });

        confirmPaymentBtn.addEventListener('click', function() {
            if (selectedPayment === 'pix') {
                // Mostrar seção PIX
                document.getElementById('secao-pagamento-pix').style.display = 'block';
                document.getElementById('valor-pagamento').textContent = `R$ ${total.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                document.getElementById('valor-instrucoes').textContent = `R$ ${total.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
                document.getElementById('secao-pagamento-pix').scrollIntoView({ behavior: 'smooth' });
            } else if (selectedPayment === 'cartao') {
                // Redirecionar para página de pagamento com cartão
                const formData = new FormData(form);
                const params = new URLSearchParams();
                
                // Adicionar dados do produto
                params.append('produto', produtoId);
                params.append('produto_nome', produtoNome);
                params.append('produto_preco', produtoPreco);
                params.append('frete', frete);
                params.append('total', total);
                
                // Adicionar dados do cliente
                for (let [key, value] of formData.entries()) {
                    params.append(key, value);
                }
                
                window.location.href = `pagamento-cartao.html?${params.toString()}`;
            }
        });

        // Funcionalidade de copiar chave PIX
        const copiarBtn = document.getElementById('copiar-chave-btn');
        const chavePix = document.getElementById('chave-pix-valor');

        copiarBtn.addEventListener('click', function() {
            navigator.clipboard.writeText(chavePix.textContent).then(function() {
                copiarBtn.textContent = 'Copiado!';
                copiarBtn.classList.add('copiado');
                
                setTimeout(function() {
                    copiarBtn.textContent = 'Copia e cola';
                    copiarBtn.classList.remove('copiado');
                }, 2000);
            }).catch(function() {
                // Fallback para navegadores mais antigos
                const textArea = document.createElement('textarea');
                textArea.value = chavePix.textContent;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                copiarBtn.textContent = 'Copiado!';
                copiarBtn.classList.add('copiado');
                
                setTimeout(function() {
                    copiarBtn.textContent = 'Copia e cola';
                    copiarBtn.classList.remove('copiado');
                }, 2000);
            });
        });
    });
    </script>
</body>
</html>

